var TreeViewItem=function(t){function e(){t.call(this),this.myHeight=0}__extends(e,t);var i=(__define,e),o=i.prototype;return o.partAdded=function(e,i){t.prototype.partAdded.call(this,e,i)},o.childrenCreated=function(){t.prototype.childrenCreated.call(this),this.arrowiconBg.addEventListener(egret.TouchEvent.TOUCH_END,this.onTouchEnd,this),this.itemBgRect.addEventListener(egret.TouchEvent.TOUCH_END,this.itemBgRectOnTouchEnd,this),this.addEventListener(egret.Event.ENTER_FRAME,this.update,this),this.arrowicon.anchorOffsetX=this.arrowicon.width,this.arrowicon.anchorOffsetY=this.arrowicon.height,this.arrowicon.rotation=-90,this.rootNode.touchEnabled=!1,this.arrowicon.touchEnabled=!1,this.foldericon.touchEnabled=!1,this.content.touchEnabled=!1},o.dataChanged=function(){"undefined"==typeof this.data.arrowicon&&(this.data.arrowicon="resource/assets/TreeView/icon.png"),"undefined"==typeof this.data.foldericon&&(this.data.foldericon={normal:"resource/assets/TreeView/folder_normal.png",press:"resource/assets/TreeView/folder_press.png"}),"undefined"==typeof this.data.content&&(this.data.content=""),this.arrowicon.source=this.data.arrowicon,this.foldericon.source=this.data.foldericon.normal,this.content.text=this.data.content,"undefined"!=typeof this.data.itemHeight?this.myHeight=this.data.itemHeight:this.myHeight=113.6,this.height=this.myHeight,this.rootNode.height=this.myHeight,this.itemBgRect.height=this.myHeight,this.itemBgRect.width=this.width,"undefined"!=typeof this.data.bgColor?this.itemBgRect.fillColor=this.data.bgColor:(this.itemBgRect.fillColor=16777215,this.data.bgColor=16777215),this.bgRect.fillColor=this.data.bgColor,this.width=this.parent.width-70,"undefined"!=typeof this.data.fontSize&&(this.content.size=this.data.fontSize),("undefined"==typeof this.data.items||null==this.data.items)&&(this.arrowicon.visible=!1,this.arrowiconBg.visible=!1)},o.update=function(){""!=this.name&&(this.name==TreeView.isSelectName?"undefined"!=typeof this.data.selectedColor?this.itemBgRect.fillColor=this.data.selectedColor:this.itemBgRect.fillColor=0:this.itemBgRect.fillColor=this.data.bgColor)},o.itemBgRectOnTouchEnd=function(t){t.stopPropagation(),this.name=this.hashCode.toString(),TreeView.isSelectName=this.name,this.popEvent()},o.popEvent=function(){var t={};t.pos=this.data.pos,0==this.arrowicon.rotation?t.isOpen=!0:t.isOpen=!1,this.dispatchEventWith(TreeView.onClick,!0,t)},o.onTouchEnd=function(t){function i(t){for(var e=0;e<t.length;e++)t[e].that=o,null!=t[e].items&&i(t[e].items)}if(this.name=this.hashCode.toString(),TreeView.isSelectName=this.name,this.popEvent(),t.stopPropagation(),0==this.arrowicon.rotation)this.arrowicon.rotation=-90,this.foldericon.source=this.data.foldericon.normal,"undefined"!=typeof this.data.items&&null!=this.data.items&&(this.removeChild(this.DataGroup),this.height=this.myHeight,"undefined"!=typeof this.data.that&&(this.data.that.height-=this.height*this.data.items.length));else if(this.arrowicon.rotation=0,this.foldericon.source=this.data.foldericon.press,"undefined"!=typeof this.data.items&&null!=this.data.items){if(this.DataGroup=new eui.DataGroup,this.DataGroup.y=this.height,this.DataGroup.x=70,this.addChild(this.DataGroup),1==this.data.level){this.height+=this.height*this.data.items.length;var o=this;"undefined"!=typeof this.data.items&&null!=this.data.items&&i(this.data.items)}else{var s=this.height*this.data.items.length;this.height+=s,this.data.that.height+=s}this.DataGroup.dataProvider=new eui.ArrayCollection(this.data.items),this.DataGroup.itemRenderer=e,this.DataGroup.useVirtualLayout=!1}else console.log("没有子数据了")},e}(eui.ItemRenderer);egret.registerClass(TreeViewItem,"TreeViewItem");var TreeView=function(t){function e(e){function i(t){for(var e=0;e<t.length;e++)t[e].level=1}function o(t,e){for(var i=0;i<t.length;i++){t[i].pos=[];for(var s=0;s<e.length;s++)t[i].pos.push(e[s]);t[i].pos.push(i),null!=t[i].items&&o(t[i].items,t[i].pos)}}void 0===e&&(e=null),t.call(this),this.items=[];null!=e?this.items=e:this.items=[{arrowicon:"resource/assets/TreeView/icon.png",foldericon:{normal:"resource/assets/TreeView/folder_normal.png",press:"resource/assets/TreeView/folder_press.png"},content:"本地磁盘(C:)",items:[{arrowicon:"resource/arrow_drop_down_72.png",foldericon:{normal:"resource/assets/TreeView/folder_normal.png",press:"resource/assets/TreeView/folder_press.png"},content:"Program Files",items:null}]},{arrowicon:"resource/assets/TreeView/icon.png",foldericon:{normal:"resource/assets/TreeView/folder_normal.png",press:"resource/assets/TreeView/folder_press.png"},content:"本地磁盘(D:)"}],i(this.items),o(this.items,[])}__extends(e,t);var i=(__define,e),o=i.prototype;return o.partAdded=function(t,e){},o.childrenCreated=function(){this.Scroller=new eui.Scroller,this.addChild(this.Scroller),this.Scroller.x=0,this.Scroller.y=0,this.DataGroup=new eui.DataGroup,this.DataGroup.y=this.height,this.DataGroup.x=0,this.addChild(this.DataGroup),this.itemDataCollection=new eui.ArrayCollection(this.items),this.DataGroup.dataProvider=this.itemDataCollection,this.DataGroup.itemRenderer=TreeViewItem,this.Scroller.viewport=this.DataGroup,this.DataGroup.useVirtualLayout=!1},o.setWidth=function(t){this.Scroller.width=t,this.DataGroup.width=t},o.setHeight=function(t){this.Scroller.height=t},o.setItemHeight=function(t){this.loopData(this.items,"itemHeight",t)},o.setItemWidth=function(t){void 0===t&&(t=113.6)},o.setBgColor=function(t){this.loopData(this.items,"bgColor",t)},o.setSelectedColor=function(t){this.loopData(this.items,"selectedColor",t)},o.setFontSize=function(t){this.loopData(this.items,"fontSize",t)},o.loopData=function(t,e,i){for(var o=0;o<t.length;o++)t[o][e]=i,null!=t[o].items&&this.loopData(t[o].items,e,i)},e.isSelectName="",e.onClick="treeViewTestOnClick",e}(eui.Component);egret.registerClass(TreeView,"TreeView",["eui.UIComponent"]);